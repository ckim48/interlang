<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>CareerQuest • Weekly Plan</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" sizes="32x32"/>
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='img/apple-touch-icon.png') }}" sizes="180x180"/>

<style>
:root{
  --ink:#2a2a2a;
  --muted:#6e7494;

  --bg-wash-1:#fff7f1;
  --bg-wash-2:#f0f7ff;
  --bg-wash-3:#f7fff6;

  --paper:#ffffff;
  --paper-br:#eef2ff;

  --brand:#ff8db3;
  --brand-2:#7acbff;
  --brand-3:#7ee0a8;
  --brand-4:#ffd86b;

  --ring:#ffdca8;
}

body{
  font-family: Nunito, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--ink);
  background:
    radial-gradient(60vmax 40vmax at 8% 0%, var(--bg-wash-2) 0%, transparent 65%),
    radial-gradient(60vmax 40vmax at 92% 4%, var(--bg-wash-1) 0%, transparent 65%),
    radial-gradient(36vmax 28vmax at 50% 100%, var(--bg-wash-3) 0%, transparent 70%),
    #fff;
  background-attachment: fixed;
  padding-bottom: 60px;
}

.page-header{
  background: linear-gradient(180deg,#ffffff,#fbfcff);
  border:1px solid var(--paper-br);
  border-radius:22px;
  padding:26px;
  box-shadow:0 16px 44px rgba(52,90,160,.10);
  margin-top:20px;
}
.page-title{
  font-family:Fredoka;
  font-weight:900;
  font-size:clamp(23px,3vw,30px);
  letter-spacing:.2px;
  color:#1f2b46;
}

.week-card{
  background:linear-gradient(180deg,#ffffff,#fbfcff);
  border-radius:20px;
  border:1px solid #eef2ff;
  padding:20px;
  box-shadow:0 14px 36px rgba(52,90,160,.10);
  transition:transform .12s ease;
}
.week-card:hover{
  transform:translateY(-3px);
}

.week-title{
  font-family:Fredoka;
  font-weight:800;
  color:#1f2b46;
  font-size:clamp(17px,2vw,19px);
}
.week-small{
  font-size:.9rem;
  color:var(--muted);
}

.status-pill{
  border-radius:999px;
  padding:.25rem .7rem;
  font-weight:800;
  font-size:.8rem;
}
.status-available{
  background:linear-gradient(180deg,#eafff3,#d8ffe9);
  border:1px solid #b6f2cf;
  color:#0c3c25;
}
.status-locked{
  background:linear-gradient(180deg,#fff1f1,#ffe5e5);
  border:1px solid #ffd0d0;
  color:#8a1d1d;
}
.status-reviewing{
  background:linear-gradient(180deg,#fff8dc,#ffedb3);
  border:1px solid #ffe299;
  color:#7a5900;
}
.status-reviewed{
  background:linear-gradient(180deg,#eaffed,#d6ffcf);
  border:1px solid #b7f7b7;
  color:#10551d;
}

.btn-week{
  border-radius:12px;
  font-weight:700;
  padding:.55rem 1rem;
}

.btn-fun{
  border-radius:14px;
  border:1px solid #ffdca8;
  background: linear-gradient(180deg,#fff6e7,#ffe8b3);
  color:#8a5600;
  font-weight:800;
}
.btn-fun-outline{
  border-radius:14px;
  border:1px dashed #ffdca8;
  background:#fff;
  color:#8a5600;
  font-weight:800;
}
</style>
</head>
<body>

{% include 'nav.html' %}

<div class="container" style="max-width:900px;">

  <div class="page-header mb-4">
    <div class="d-flex justify-content-between flex-wrap gap-3">
      <div>
        <h1 class="page-title text-capitalize">{{ job }} • Weekly Plan</h1>
        <div class="muted small">
          Level {{ level }} • Created {{ created_at }}
        </div>
      </div>

      <div class="d-flex gap-2 align-items-center">
        <a class="btn btn-fun-outline" href="{{ url_for('career') }}">
          <i class="bi bi-stars me-1"></i> New Worksheet
        </a>
        <a class="btn btn-fun-outline" href="{{ url_for('home') }}">
          <i class="bi bi-house-door me-1"></i> Home
        </a>
      </div>
    </div>
  </div>

  <div class="row g-3 mt-2">

    {% for w in weeks_vm %}
    <div class="col-md-6">
      <div class="week-card h-100 d-flex flex-column justify-content-between">

        <!-- Header -->
        <div>
          <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="week-title">Week {{ w.week }}</div>

            {% if not w.is_unlocked %}
              <span class="status-pill status-locked">
                <i class="bi bi-lock"></i> Locked
              </span>

            {% elif w.submitted and not w.review %}
              <span class="status-pill status-reviewing">
                <i class="bi bi-hourglass-split"></i> Reviewing…
              </span>

            {% elif w.review %}
              <span class="status-pill status-reviewed">
                <i class="bi bi-check-circle"></i> Reviewed
              </span>

            {% else %}
              <span class="status-pill status-available">
                <i class="bi bi-unlock"></i> Available
              </span>
            {% endif %}
          </div>

          <div class="fw-bold text-capitalize mb-1">{{ w.title }}</div>
          <div class="week-small">
            Unlocks: {{ w.unlock_at_str }}
          </div>
        </div>

        <!-- Buttons -->
        <div class="mt-3">

          {% if not w.is_unlocked %}
            <button class="btn btn-week btn-outline-secondary w-100" disabled>
              Opens at {{ w.unlock_at_str }}
            </button>

          {% elif w.submitted and not w.review %}
            <button class="btn btn-week btn-outline-secondary w-100" disabled>
              <i class="bi bi-hourglass-split"></i> Waiting for Review
            </button>

          {% elif w.review %}
            <a class="btn btn-week btn-fun w-100"
               href="{{ url_for('career_view', ws_id=ws_id, week=w.week) }}">
              <i class="bi bi-eye"></i> View Review
            </a>

          {% else %}
            <a class="btn btn-week btn-fun w-100"
               href="{{ url_for('career_view', ws_id=ws_id, week=w.week) }}">
              <i class="bi bi-arrow-right-circle"></i> Open Week {{ w.week }}
            </a>
          {% endif %}

        </div>

      </div>
    </div>
    {% endfor %}

  </div>

  <div class="text-center mt-4 muted small">
    New weeks unlock every 7 days from the creation time.
  </div>

</div>

</body>
</html>
